(function() {
  var phantom;

  phantom = require('phantom');

  phantom.create(function(ph) {
    return ph.createPage(function(page) {
      return page.open("http://www.deal.com.sg/deals/singapore", function(status) {
        var finishedFunc, someFunc;
        console.log("opened page? ", status);
        someFunc = function(aaa, my_obj) {
          var attribute_to_want, h2Arr, results, x, _i, _ref;
          attribute_to_want = aaa;
          h2Arr = [];
          results = document.querySelectorAll(attribute_to_want);
          for (x = _i = 0, _ref = results.length; 0 <= _ref ? _i < _ref : _i > _ref; x = 0 <= _ref ? ++_i : --_i) {
            h2Arr.push(results[x].src);
          }
          return {
            h2: h2Arr,
            aaa: this["arguments"],
            obj: my_obj
          };
        };
        finishedFunc = function(result) {
          console.log(result);
          return ph.exit();
        };
        return page.evaluate(someFunc, finishedFunc, '#deal-main-pic img', {
          wahtt: 111
        });
      });
    });
  });

}).call(this);
