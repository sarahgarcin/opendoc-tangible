(function() {
  var another_funny, phantom;

  phantom = require('phantom');

  phantom.create(function(ph) {
    return ph.createPage(function(page) {
      return page.open('http://en.wikipedia.org/wiki/Main_Page', function(status) {
        console.log('Opened site? %s', status);
        return another_funny(page, ph);
      });
    });
  });

  another_funny = function(page, ph) {
    return page.evaluate(function() {
      var funny, h2Arr, pArr;
      funny = function() {
        var h2Arr, results, x, _i, _ref;
        h2Arr = [];
        results = document.querySelectorAll('p');
        for (x = _i = 0, _ref = results.length; 0 <= _ref ? _i < _ref : _i > _ref; x = 0 <= _ref ? ++_i : --_i) {
          h2Arr.push(results[x].innerHTML);
        }
        return h2Arr;
      };
      h2Arr = [];
      pArr = [];
      h2Arr = funny();
      return {
        h2: h2Arr
      };
    }, function(result) {
      console.log(result);
      return ph.exit();
    });
  };

}).call(this);
